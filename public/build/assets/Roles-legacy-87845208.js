System.register(["./vendor-legacy-98b246d1.js","./default.css_vue_type_style_index_0_src_true_lang-legacy-0541b55c.js","./app-legacy-3595deb5.js","./Errors-legacy-367ae0e4.js","./__commonjsHelpers__-legacy-742540af.js"],(function(e,t){"use strict";var a,r,s,o,l,n,i,d,c,p,m,g,u,h,f,b,x,y,w,k,v,R,C,D,T,_,U,M,P,E,j,F,B,A,S,I,$;return{setters:[e=>{a=e.aA,r=e.aB,s=e.aC,o=e.aD,l=e.e,n=e.h,i=e.r,d=e.l,c=e.i,p=e.t,m=e.k,g=e.j,u=e.w,h=e.o,f=e.g,b=e.m,x=e.ad,y=e.ae,w=e.U,k=e.L,v=e.q,R=e.p,C=e.am,D=e.n,T=e.s,_=e.z,U=e.E,M=e.az,P=e.f},e=>{E=e.P,j=e.A,F=e.s,B=e.c,A=e.a},e=>{S=e.C,I=e._},e=>{$=e.E},null],execute:function(){var t=document.createElement("style");t.textContent="[data-v-3283c55c] .multiselect-option{background:transparent;color:#777}[data-v-3283c55c] .multiselect-option.is-pointed{background:#10b981;color:#fff}\n",document.head.appendChild(t);const N={name:"RolesTableRow",components:{LockClosedIcon:a,LockOpenIcon:r,CircleSvg:S,PencilSquareIcon:s,TrashIcon:o},props:{role:{type:Object,required:!0},dataReady:{type:Boolean,default:!1},lockJiggled:{type:Boolean,default:!1}},setup:()=>({}),data:()=>({locked:!0}),computed:{},watch:{lockJiggled(e){this.locked=!0}},created(){},mounted(){},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),parseDisplayDate:e=>n(e).format("MMM Do YYYY, h:mma"),triggerEditRole(){this.$emit("editRole",this.role)},triggerDeleteRole(){const e=this,t=`<strong>Delete ${this.role.name}?</strong>`;this.role.name,e.$swal.fire({title:t,icon:"warning",html:"Are you sure you want to <strong>Delete",showCancelButton:!1,showDenyButton:!0,confirmButtonColor:"#FF0000",denyButtonColor:"#777777",confirmButtonText:"Delete",denyButtonText:"Cancel"}).then((t=>{t.isConfirmed?this.$emit("deleteRole",this.role):t.isDenied&&e.popToast({message:"Cancelled",timer:2e3,icon:"error"})}))}}},V={class:"bg-gray-100 text-gray-900 dark:bg-slate-700 dark:text-gray-100"},Y={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},L={class:"flex items-center"},J={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},z={class:"flex items-center whitespace-nowrap"},O={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},q={class:"flex items-center"},G={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},K={class:"flex items-center text-xs"},H={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},W={class:"flex items-center"},Q={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},X={class:"flex items-center"},Z={key:0,class:"whitespace-nowrap text-xs"},ee={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},te={class:"flex items-center"},ae={key:0,class:"whitespace-nowrap text-xs"},re={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},se={key:0,class:"flex items-center"},oe={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},le={key:0,class:"flex items-center"},ne={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},ie={class:"flex items-center whitespace-nowrap"},de={class:"sr-only"},ce=c("span",{class:"sr-only"},"Edit Role",-1),pe=c("span",{class:"sr-only"},"Delete Role",-1),me={name:"RolesTable",components:{Pagination:E,RolesTableRow:I(N,[["render",function(e,t,a,r,s,o){const l=i("LockClosedIcon"),n=i("LockOpenIcon"),b=i("CircleSvg"),x=i("AppButton"),y=i("PencilSquareIcon"),w=i("TrashIcon");return h(),d("tr",V,[c("td",Y,[c("div",L,p(a.role.id),1)]),c("td",J,[c("div",z,p(a.role.name),1)]),c("td",O,[c("div",q,p(a.role.slug),1)]),c("td",G,[c("div",K,p(a.role.description),1)]),c("td",H,[c("div",W,p(a.role.level),1)]),c("td",Q,[c("div",X,[a.role.created_at?(h(),d("span",Z,p(o.parseDisplayDate(a.role.created_at)),1)):m("",!0)])]),c("td",ee,[c("div",te,[a.role.updated_at?(h(),d("span",ae,p(o.parseDisplayDate(a.role.updated_at)),1)):m("",!0)])]),c("td",re,[a.role&&a.role.users&&a.role.users.length>=0?(h(),d("div",se,p(a.role.users.length),1)):m("",!0)]),c("td",oe,[a.role&&a.role.permissions&&a.role.permissions.length>=0?(h(),d("div",le,p(a.role.permissions.length),1)):m("",!0)]),c("td",ne,[c("div",ie,[g(x,{loading:!a.dataReady,class:"mr-2 inline-block rounded px-1 py-1 text-sm font-medium leading-snug leading-snug text-gray-700 shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg dark:text-white","btn-class":(s.locked,"bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-hover-class":(s.locked,"hover:bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-class-dark":(s.locked,"bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-hover-class-dark":(s.locked,"hover:bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),onClick:t[0]||(t[0]=e=>s.locked=!s.locked)},{text:u((()=>[s.locked&&a.dataReady?(h(),f(l,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),!s.locked&&a.dataReady?(h(),f(n,{key:1,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(h(),f(b,{key:2,class:"mr-2 h-3 w-3"})),c("span",de,p(s.locked?"Unlock":"Lock")+" User Settings",1)])),_:1},8,["loading","btn-class","btn-hover-class","btn-class-dark","btn-hover-class-dark"]),g(x,{warning:"",disabled:s.locked,loading:!a.dataReady,class:"mr-2 px-1 py-1 text-sm",onClick:o.triggerEditRole},{text:u((()=>[a.dataReady?(h(),f(y,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(h(),f(b,{key:1,class:"mr-2 h-3 w-3"})),ce])),_:1},8,["disabled","loading","onClick"]),g(x,{danger:"",disabled:s.locked||a.role&&a.role.users&&a.role.users.length>0,loading:!a.dataReady,class:"mr-2 px-1 py-1 text-sm",onClick:o.triggerDeleteRole},{text:u((()=>[a.dataReady?(h(),f(w,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(h(),f(b,{key:1,class:"mr-2 h-3 w-3"})),pe])),_:1},8,["disabled","loading","onClick"])])])])}]])},props:{dataReady:{type:Boolean,default:!1},lockJiggled:{type:Boolean,default:!1},rolesData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({})}},setup:()=>({}),data:()=>({offset:4}),computed:{...b({authenticated:"auth/authenticated",user:"auth/user",roles:"auth/roles"})},watch:{},created(){},mounted(){},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),getRoles(e){this.$emit("getRoles",e)},deleteRole(e){this.$emit("deleteRole",e)},editRole(e){this.$emit("editRole",e)}}},ge={class:"overflow-x-scroll rounded-lg shadow",style:{width:"100%"}},ue={class:"min-w-full leading-normal","aria-describedby":"Users Table"},he=c("thead",null,[c("tr",{class:"border-b-2 border-gray-300 bg-gray-200 text-gray-600 dark:border-gray-500 dark:bg-slate-900 dark:text-gray-200"},[c("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Id "),c("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Name "),c("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Slug "),c("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Description "),c("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Level "),c("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Updated At "),c("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Updated At "),c("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Users "),c("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Permissions "),c("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"})])],-1),fe={key:0},be={key:1},xe=[c("tr",{class:"bg-gray-100 text-gray-900 dark:bg-slate-700 dark:text-gray-100"},[c("td",{colspan:"10",class:"pt-10 pb-10 text-center"},[c("span",{class:"fa fa-circle-notch fa-spin fa-5x text-gray-400"})])],-1)],ye={class:"w-full text-center"},we={colspan:"10"},ke={key:0,class:"xs:flex-row xs:justify-between flex flex-col items-center px-3 py-3 dark:bg-slate-700"},ve=I(me,[["render",function(e,t,a,r,s,o){const l=i("RolesTableRow"),n=i("Pagination");return h(),d("div",ge,[c("table",ue,[he,a.dataReady?(h(),d("tbody",fe,[(h(!0),d(x,null,y(a.rolesData,(e=>(h(),f(l,{key:e.id,role:e,"data-ready":a.dataReady,"lock-jiggled":a.lockJiggled,onEditRole:o.editRole,onDeleteRole:o.deleteRole},null,8,["role","data-ready","lock-jiggled","onEditRole","onDeleteRole"])))),128))])):m("",!0),a.dataReady?m("",!0):(h(),d("tbody",be,xe)),c("tfoot",ye,[c("tr",null,[c("td",we,[a.dataReady&&a.rolesData&&a.rolesData.length>=1?(h(),d("div",ke,[g(n,{pagination:a.pagination,offset:4,onPaginate:o.getRoles},null,8,["pagination","onPaginate"])])):m("",!0)])])])])])}]]),Re={name:"UserFormModal",components:{AppModal:j,UserCircleIcon:w,Multiselect:F,Errors:$},props:{showingForm:{type:Boolean,default:!1},newRole:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},role:{type:Object,default:null},useInlineMessage:{type:Boolean,default:!1},availablePermissions:{type:Array,default:null}},setup:()=>({}),data:()=>({roleName:"",form:{name:null,slug:null,description:null,level:0,permissions:[]},submitting:!1,errors:null,changed:!1,ready:!1}),computed:{},watch:{form:{handler(e,t){this.ready&&(this.changed=!0)},deep:!0,immediate:!1}},created(){},mounted(){const e=this;e.role?(e.form=B(e.role),e.role.name&&(e.roleName=e.role.name),e.form.permissions=e.form.permissions.map((e=>e.id)),setTimeout((()=>{e.ready=!0}),100)):e.ready=!0},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),parseDisplayDate:e=>e&&1!=e?n(e).format("MMM Do YYYY, h:mma"):n(new Date).format("MMM Do YYYY, h:mma"),async submit(){this.error=null,this.submitting=!0,this.newRole&&await this.createRole(),this.newRole||await this.updateRole(),this.submitting=!1},formValid(){return this.errors=null,!!this.form&&(this.form.name||(this.errors={},this.errors.name="Missing Role Name"),this.form.slug||(this.errors||(this.errors={}),this.errors.slug="Missing Role Slug"),!this.errors)},async createRole(){if(!this.formValid())return this.submitting=!1,void this.popToast({message:"Error Validating Role",timer:5e3,icon:"error"});await k.post("/api/roles/create-role",this.form).then((({data:e})=>{this.$emit("roleCreated",e.role),this.popToast({message:"Role Successfully Created!",timer:5e3,icon:"success"}),this.submitting=!1})).catch((({response:e})=>{if(422===e.status){const{errors:t}=e.data;this.errors=t}else this.popToast({message:"Error Creating Role",timer:5e3,icon:"error"});this.submitting=!1})),this.submitting=!1},async updateRole(){const e=this;if(!this.formValid())return this.submitting=!1,void this.popToast({message:"Error Validating Role",timer:5e3,icon:"error"});await k.patch(`/api/roles/update-role/${e.role.id}`,e.form).then((({data:t})=>{e.$emit("roleUpdated",t.role),e.popToast({message:`Role ${t.role.name} Successfully Updated!`,timer:5e3,icon:"success"}),e.submitting=!1})).catch((({response:t})=>{if(422===t.status){const{errors:a}=t.data;e.errors=a}else e.popToast({message:"Error Updating Role",timer:5e3,icon:"error"});e.submitting=!1})),e.submitting=!1},closeModal(){this.$emit("closeModal")}}},Ce=e=>(_("data-v-3283c55c"),e=e(),U(),e),De={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Te={class:"flex-item relative mb-3 flex-auto"},_e=Ce((()=>c("label",{for:"name"}," Name ",-1))),Ue={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug text-slate-300"},Me={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Pe={class:"flex-item relative mb-3 flex-auto"},Ee=Ce((()=>c("label",{for:"slug"}," Slug ",-1))),je={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Fe={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Be={class:"flex-item relative mb-3 flex-auto"},Ae=Ce((()=>c("label",{for:"description"}," Description ",-1))),Se={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Ie={class:"relative mb-3 flex w-full flex-wrap items-stretch"},$e={class:"flex-item relative mb-3 flex-auto"},Ne=Ce((()=>c("label",{for:"level"}," Level ",-1))),Ve={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Ye={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Le={class:"flex-item relative mb-3 max-w-2xl flex-auto"},Je=Ce((()=>c("h6",null,"Role Permissions",-1))),ze={key:0,class:"relative mb-3 mt-5 flex w-full flex-wrap items-stretch"},Oe={class:"flex-item relative flex-auto text-xs"},qe=Ce((()=>c("strong",{class:"text-red-400"},[c("span",{class:"fas fa-warning fa-fw mr-1"}),v("Warning")],-1))),Ge={class:"font-bold"},Ke={class:"relative mb-3 mt-5 flex w-full flex-wrap items-stretch"},He={class:"flex-item relative flex-auto text-xs uppercase"},We={key:0,class:"float-left"},Qe={class:"text-xs font-bold"},Xe={class:"flex-item relative flex-auto text-xs uppercase"},Ze={key:0,class:"float-right"},et={class:"text-xs font-bold"},tt={style:{width:"100%"}},at={key:0,class:"fa fa-circle-notch fa-spin ml-3"},rt={name:"Roles",components:{ChevronRightIcon:M,RolesTable:ve,RoleFormModal:I(Re,[["render",function(e,t,a,r,s,o){const l=i("Errors"),n=i("Multiselect"),b=i("AppButton"),x=i("AppModal");return h(),f(x,{"show-modal":a.showingForm,onCloseModal:o.closeModal},{title:u((()=>[v(p(a.newRole?"Create Role":"Editing Role "+s.roleName),1)])),body:u((()=>[s.errors&&a.useInlineMessage?(h(),f(l,{key:0,content:s.errors,errors:s.errors,"container-class":"w-100 mb-5",type:"error",onClose:t[0]||(t[0]=e=>s.errors=null)},null,8,["content","errors"])):m("",!0),c("form",{onSubmit:t[6]||(t[6]=T((()=>{}),["prevent"]))},[c("div",De,[c("div",Te,[_e,R(c("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.name=e),type:"text",placeholder:"Name",name:"name",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.name?"border-red-500 text-red-600 placeholder-red-500 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.name]]),c("span",Ue,[c("span",{class:D(["fas fa-lock",s.errors&&s.errors.name?"text-red-600":"text-slate-300"])},null,2)])])]),c("div",Me,[c("div",Pe,[Ee,R(c("input",{id:"slug","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.slug=e),type:"text",placeholder:"Slug",name:"slug",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.slug?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.slug]]),c("span",je,[c("span",{class:D(["fas fa-code",s.errors&&s.errors.slug?"text-red-600":"text-slate-300"])},null,2)])])]),c("div",Fe,[c("div",Be,[Ae,R(c("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=e=>s.form.description=e),type:"text",placeholder:"Description",name:"description",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.description?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.description]]),c("span",Se,[c("span",{class:D(["fas fa-pencil",s.errors&&s.errors.description?"text-red-600":"text-slate-300"])},null,2)])])]),c("div",Ie,[c("div",$e,[Ne,R(c("input",{id:"level","onUpdate:modelValue":t[4]||(t[4]=e=>s.form.level=e),type:"number",placeholder:"Level",name:"level",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.level?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.level]]),c("span",Ve,[c("span",{class:D(["fas fa-pencil",s.errors&&s.errors.level?"text-red-600":"text-slate-300"])},null,2)])])]),c("div",Ye,[c("div",Le,[Je,g(n,{modelValue:s.form.permissions,"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.permissions=e),options:a.availablePermissions,"track-by":"id",label:"name",mode:"tags",placeholder:"Select role permissions"},null,8,["modelValue","options"])])]),a.role&&a.role.users&&a.role.users.length&&a.role.users.length>0?(h(),d("div",ze,[c("div",Oe,[qe,v(": This will affect "),c("span",Ge,p(a.role.users.length),1),v(" User"+p(a.role.users.length>1?"s":""),1)])])):m("",!0),c("div",Ke,[c("div",He,[s.form.created_at?(h(),d("div",We,[v(" Created at: "),c("div",Qe,p(o.parseDisplayDate(s.form.created_at)),1)])):m("",!0)]),c("div",Xe,[s.form.updated_at?(h(),d("div",Ze,[v(" Updated at: "),c("div",et,p(o.parseDisplayDate(s.form.updated_at)),1)])):m("",!0)])])],32)])),footer:u((()=>[c("div",tt,[s.changed?(h(),f(b,{key:0,disabled:a.loading||s.submitting||!s.changed,class:"float-left border border-green-800 bg-transparent bg-transparent text-sm font-medium text-green-800 text-white shadow-md transition duration-150 ease-in-out hover:border-green-900 hover:bg-green-900 hover:text-white hover:shadow-lg focus:shadow-lg active:shadow-lg dark:hover:border-green-800 dark:hover:bg-green-800",onClick:o.submit},{text:u((()=>[v(p(a.newRole?s.submitting?"Creating":"Create":s.submitting?"Updating":"Update")+" ",1),s.submitting?(h(),d("span",at)):m("",!0)])),_:1},8,["disabled","onClick"])):m("",!0),g(b,{disabled:a.loading||s.submitting,class:"float-right border border-gray-700 bg-transparent bg-transparent text-sm font-medium text-gray-700 text-white shadow-md transition duration-150 ease-in-out hover:border-gray-700 hover:bg-gray-700 hover:text-white hover:shadow-lg focus:shadow-lg active:shadow-lg dark:hover:bg-gray-700",onClick:o.closeModal},{text:u((()=>[v(p(s.changed?"Cancel":"Close"),1)])),_:1},8,["disabled","onClick"])])])),_:1},8,["show-modal","onCloseModal"])}],["__scopeId","data-v-3283c55c"]]),CircleSvg:S,PerPage:A},props:{},setup:()=>({}),data:()=>({dataReady:!1,rolesData:null,pagination:{},perPage:25,lockJigled:!1,showCreateRoleForm:!1,roleEditing:null,creatingNewRole:!1,roleFormKey:432489,availablePermissions:[],permissionsDataReady:!1}),computed:{...b({authenticated:"auth/authenticated",user:"auth/user",roles:"auth/roles"})},watch:{},created(){},mounted(){this.getRoles(),this.getPermissions()},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),perPageChanged(e){this.perPage=parseInt(e),this.pagination.current_page=1,this.getRoles()},async getRoles(e=null){e&&(this.pagination.current_page=e),await k.get(`/api/roles-complete?page=${this.pagination.current_page}&per=${this.perPage}`).then((({data:e})=>{this.rolesData=e.data,delete e.data,this.pagination=e,this.dataReady=!0})).catch((({response:e})=>{this.popToast({message:"Error Getting Roles",timer:5e3,icon:"error"}),this.dataReady=!0})),this.dataReady=!0},async getPermissions(){this.permissionsDataReady=!1,await k.get("/api/permissions").then((({data:e})=>{this.availablePermissions=e.permissions,this.permissionsDataReady=!0})).catch((({response:e})=>{this.popToast({message:"Error Getting Permissions",timer:5e3,icon:"error"}),this.permissionsDataReady=!0})),this.permissionsDataReady=!0},async deleteRole(e){await k.delete(`/api/roles/delete/role/${e.id}`).then((({data:e})=>{this.rolesData=this.rolesData.filter((t=>t.id!=e.id)),this.popToast({message:"Successfully Deleted Role!",timer:5e3,icon:"success"})})).catch((({response:e})=>{this.popToast({message:"Error Deleting Role",timer:5e3,icon:"error"}),this.dataReady=!0}))},jiggleTheLock(){const e=this;e.lockJigled=!0,setTimeout((()=>{e.lockJigled=!1}),1)},closeRoleForm(){this.roleEditing=null,this.creatingNewRole=!1,this.showCreateRoleForm=!1},editRole(e){this.roleFormKey+=1,this.roleEditing=e,this.creatingNewRole=!1,this.showCreateRoleForm=!0},roleUpdated(e){this.rolesData=this.rolesData.map((t=>t.id!==e.id?t:e)),this.getRoles(),this.jiggleTheLock(),this.closeRoleForm()},roleCreated(e){this.rolesData.push(e),this.getRoles(),this.closeRoleForm()},triggerCreateRole(){this.roleFormKey+=1,this.creatingNewRole=!0,this.showCreateRoleForm=!0,this.roleEditing=null}}},st={id:"roles",class:"bg-white p-3 dark:bg-slate-800 dark:text-gray-200"},ot={class:"mb-6 text-sm font-semibold","aria-label":"Breadcrumb"},lt={class:"inline-flex list-none p-0"},nt={class:"flex items-center"},it={class:"flex items-center"},dt={class:"flex items-center"},ct={key:0,class:"fas fa-plus fa-fw ml-2 mr-2"},pt=c("span",{class:"sr-only"},"Create New Role",-1);e("default",I(rt,[["render",function(e,t,a,r,s,o){const l=i("router-link"),n=i("ChevronRightIcon"),p=i("PerPage"),b=i("CircleSvg"),x=i("AppButton"),y=i("RolesTable"),w=i("RoleFormModal"),k=P("tippy");return h(),d("div",st,[c("nav",ot,[c("ol",lt,[c("li",nt,[e.authenticated&&e.roles&&(e.roles.admin||e.roles.superAdmin)?(h(),f(l,{key:0,to:{name:"admin"},class:"text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-400"},{default:u((({isActive:e})=>[v(" Admin ")])),_:1})):m("",!0)]),c("li",it,[g(n,{class:"ml-2 mr-2 mt-0 h-4 w-4"})]),c("li",dt,[e.authenticated&&e.roles&&(e.roles.admin||e.roles.superAdmin)?(h(),f(l,{key:0,to:{name:"roles"},class:"text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-400"},{default:u((({isActive:e})=>[c("span",{class:D([e&&"cursor-default text-gray-800 hover:text-gray-900 dark:text-gray-500 dark:hover:text-gray-500"])}," Roles ",2)])),_:1})):m("",!0)])]),s.dataReady?(h(),f(p,{key:0,items:s.rolesData,"per-page":s.perPage,class:"float-right mb-2",style:{"margin-top":"-0.5em"},onChanged:o.perPageChanged},null,8,["items","per-page","onChanged"])):m("",!0)]),R((h(),f(x,{disabled:s.showCreateRoleForm||!s.dataReady,class:"float-right mb-2 px-2 py-2 text-sm font-medium",onClick:o.triggerCreateRole},{text:u((()=>[s.dataReady?(h(),d("span",ct)):m("",!0),s.dataReady?m("",!0):(h(),f(b,{key:1,class:"ml-2 mr-2 mt-0 h-4 w-4"})),pt])),_:1},8,["disabled","onClick"])),[[k,"Create Role"]]),g(y,{"roles-data":s.rolesData,pagination:s.pagination,"per-page":s.perPage,"data-ready":s.dataReady,"lock-jiggled":s.lockJigled,onGetRoles:o.getRoles,onEditRole:o.editRole,onDeleteRole:o.deleteRole},null,8,["roles-data","pagination","per-page","data-ready","lock-jiggled","onGetRoles","onEditRole","onDeleteRole"]),(h(),f(w,{key:s.roleFormKey,"showing-form":s.showCreateRoleForm,role:s.roleEditing,"new-role":s.creatingNewRole,"available-permissions":s.availablePermissions,onCloseModal:o.closeRoleForm,onRoleCreated:o.roleCreated,onRoleUpdated:o.roleUpdated},null,8,["showing-form","role","new-role","available-permissions","onCloseModal","onRoleCreated","onRoleUpdated"]))])}]]))}}}));
//# sourceMappingURL=Roles-legacy-87845208.js.map
